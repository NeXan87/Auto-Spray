# Smart Air Freshener

"–ü—Ä–µ–≤—Ä–∞—â–µ–Ω–∏–µ" –∫–ª–∞—Å—Å–∏—á–µ—Å–∫–æ–≥–æ –æ—Å–≤–µ–∂–∏—Ç–µ–ª—è –≤–æ–∑–¥—É—Ö–∞ AirWick –≤ —É–º–Ω—ã–π –Ω–∞ Arduino Pro Micro —Å —ç–Ω–µ—Ä–≥–æ—Å–±–µ—Ä–µ–∂–µ–Ω–∏–µ–º –∏ –≥–∏–±–∫–æ–π –Ω–∞—Å—Ç—Ä–æ–π–∫–æ–π.

## ‚ú® –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø—à–∏–∫** —á–µ—Ä–µ–∑ 2 –º–∏–Ω—É—Ç—ã –ø–æ—Å–ª–µ –≤—ã–∫–ª—é—á–µ–Ω–∏—è —Å–≤–µ—Ç–∞ –∏–ª–∏ —Å—Ä–∞–∑—É
- **–†—É—á–Ω–æ–π –ø—à–∏–∫** –ø–æ –∫–Ω–æ–ø–∫–µ ‚Äî –±–µ–∑ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ –ø–æ—Å–ª–µ –ø—à–∏–∫–∞
- **1/2/3 –ø—à–∏–∫–∞** ‚Äî –≤ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–º —Ä–µ–∂–∏–º–µ, –≤—ã–±–æ—Ä —á–µ—Ä–µ–∑ –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å
- **–†–µ–∂–∏–º "—Ç–æ–ª—å–∫–æ —Ä—É—á–Ω–æ–π"** ‚Äî –∏–≥–Ω–æ—Ä–∏—Ä—É–µ—Ç —Å–≤–µ—Ç
- **–ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –Ω–∞ 15 –º–∏–Ω** –ø–æ—Å–ª–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –ø—à–∏–∫–∞ (–Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è)
- **–°–±—Ä–æ—Å –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏** ‚Äî —É–¥–µ—Ä–∂–∞–Ω–∏–µ–º –∫–Ω–æ–ø–∫–∏ 2+ —Å–µ–∫
- **–ö–æ–Ω—Ç—Ä–æ–ª—å –±–∞—Ç–∞—Ä–µ–∏** (Li-ion 4.2 –í): –º–∏–≥–∞–µ—Ç –¥–æ–ø. —Å–≤–µ—Ç–æ–¥–∏–æ–¥ –ø—Ä–∏ ‚â§3.4 –í
- **–ü–æ–ª–Ω—ã–π —Å–æ–Ω** (<1 –º–∫–ê) –ø—Ä–∏ –≤—ã–∫–ª—é—á–µ–Ω–Ω–æ–º —Å–≤–µ—Ç–µ –∏ –≤ —Å–æ—Å—Ç–æ—è–Ω–∏–∏ –ø–æ–∫–æ—è
- **–ú–æ—Ç–æ—Ä —Å —Ä–µ–≤–µ—Ä—Å–æ–º** ‚Äî –Ω–∞–¥—ë–∂–Ω—ã–π –≤–æ–∑–≤—Ä–∞—Ç –∫–∞—Ä–µ—Ç–∫–∏
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ **OPT3001** –∏–ª–∏ **–∞–Ω–∞–ª–æ–≥–æ–≤–æ–≥–æ —Ñ–æ—Ç–æ—Ä–µ–∑–∏—Å—Ç–æ—Ä–∞**

## üîå –ê–ø–ø–∞—Ä–∞—Ç—É—Ä–∞

- **–ú–ö**: Arduino Pro Mini 3.3V / 8 –ú–ì—Ü (ATmega328P)
- **–ü–∏—Ç–∞–Ω–∏–µ**: Li-ion 4.2–í (–¥–∞–ª–µ–µ DC –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞ 3.0–í)
- **–ú–æ—Ç–æ—Ä**: —Ä–æ–¥–Ω–æ–π DC-–º–æ—Ç–æ—Ä —á–µ—Ä–µ–∑ MX1508
- **–°–≤–µ—Ç–æ–¥–∏–æ–¥—ã**: RGB + –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π + –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π
- **–ü–∏—â–∞–ª–∫–∞**: –ø–∞—Å—Å–∏–≤–Ω–∞—è
- **–ü–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª–∏**: –∫–Ω–æ–ø–∫–∞ + 4-–ø–æ–∑–∏—Ü–∏–æ–Ω–Ω—ã–π —Ä–µ–∂–∏–º + –ø–∞—Ä–∞ 2 –ø–æ–∑–∏—Ü–∏–æ–Ω–Ω—ã—Ö

## ‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∞

–í—Å–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã ‚Äî –≤ [`config.h`](config.h):

| –ö–∞—Ç–µ–≥–æ—Ä–∏—è    | –ü—Ä–∏–º–µ—Ä                                                                        |
| ------------ | ----------------------------------------------------------------------------- |
| **–¢–∞–π–º–∏–Ω–≥–∏** | `LIGHT_READY_MS = 2000` (2 —Å–µ–∫ –¥–æ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏)                                 |
| **–ü—à–∏–∫**     | `SPRAY_ON_MS = 800` (800 –º—Å –≤–ø–µ—Ä—ë–¥), `SPRAY_REVERSE_MS = 300` (300 –º—Å —Ä–µ–≤–µ—Ä—Å) |
| **–ë–∞—Ç–∞—Ä–µ—è**  | `BATTERY_LOW_MV = 3400` (–º–∏–≥–∞—Ç—å –ø—Ä–∏ ‚â§3.4 –í)                                   |
| **–°–æ–Ω**      | `ENABLE_SLEEP_MODE = true`                                                    |
| **OPT3000**  | `USE_OPT3001 = true`, `OPT3001_LIGHT_THRESHOLD = 100`                         |

## üîã –≠–Ω–µ—Ä–≥–æ–ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–µ

- **–ê–∫—Ç–∏–≤–Ω—ã–π —Ä–µ–∂–∏–º**: ~1 –º–ê
- **–ì–ª—É–±–æ–∫–∏–π —Å–æ–Ω**: 1 –º–∫–ê
- **–ü—à–∏–∫**: ~500 –º–ê (–∫—Ä–∞—Ç–∫–æ–≤—Ä–µ–º–µ–Ω–Ω–æ)

## üõ†Ô∏è –ü—Ä–æ—à–∏–≤–∫–∞

1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏:
   - `Bounce2`
   - `GyverPower`
2. –í—ã–±–µ—Ä–∏—Ç–µ –≤ IDE:
   - **–ü–ª–∞—Ç–∞**: _Arduino Pro Micro_
   - **–ü—Ä–æ—Ü–µ—Å—Å–æ—Ä**: _ATmega328P (3.3V, 8 MHz)_
3. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã –ø–æ–¥ —Å–µ–±—è.
4. –ü–æ–¥–∫–ª—é—á–∏—Ç–µ –ø—Ä–æ–≥—Ä–∞–º–º–∞—Ç–æ—Ä.
5. –ó–∞–≥—Ä—É–∑–∏—Ç–µ –ø—Ä–æ—à–∏–≤–∫—É.

## üìÇ –°—Ç—Ä—É–∫—Ç—É—Ä–∞

```
‚îú‚îÄ‚îÄ Smart-Air-Freshener.ino // —Ç–æ—á–∫–∞ –≤—Ö–æ–¥–∞
‚îú‚îÄ‚îÄ config.h // –í–°–ï –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∑–¥–µ—Å—å
‚îú‚îÄ‚îÄ state.cpp // –º–∞—à–∏–Ω–∞ —Å–æ—Å—Ç–æ—è–Ω–∏–π
‚îú‚îÄ‚îÄ leds.cpp // —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–≤–µ—Ç–æ–¥–∏–æ–¥–∞–º–∏
‚îú‚îÄ‚îÄ opt3001.cpp // –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –¥–∞—Ç—á–∏–∫–∞ —Å–≤–µ—Ç–∞
‚îú‚îÄ‚îÄ spray.cpp // —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –º–æ—Ç–æ—Ä–æ–º
‚îú‚îÄ‚îÄ battery.cpp // –∫–æ–Ω—Ç—Ä–æ–ª—å –Ω–∞–ø—Ä—è–∂–µ–Ω–∏—è
‚îú‚îÄ‚îÄ sleep.cpp // —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–Ω–æ–º
‚îú‚îÄ‚îÄ utils.cpp // –æ–±—â–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏
```
